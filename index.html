<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Comic</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      margin: 0;
      padding: 0;
    }


    /* Menu Bar Styles */
    nav {
      background-color: #333;
      color: #fff;
      padding: 10px;
      position: fixed;
      top: 0;
      width: 100%;
      display: flex;
      justify-content: space-around;
      z-index: 1000;
    }


    nav a {
      color: white;
      text-decoration: none;
      padding: 10px;
      font-size: 1.2rem;
    }


    nav a:hover {
      background-color: #555;
    }


    /* Body content adjustments */
    body {
      margin-top: 60px;
      /* Adjust for fixed menu bar */
    }


    /* Section styles */
    section {
      padding: 50px 20px;
      text-align: center;
      background-color: #fff;
    }


    #about {
      background-color: #e0e0e0;
    }


    #contact {
      background-color: #ccc;
    }


    #comic-container {
      width: 80%;
      max-width: 1000px;
      position: relative;
      border: 2px solid #000;
      background-color: #fff;
      margin: 0 auto;
    }


    #comic-image {
      width: 100%;
      height: auto;
    }


    #dialogue-box {
      padding: 10px;
      background-color: #fff;
      border-top: 2px solid #000;
      font-size: 1.2rem;
    }


    /* Adjust interactive elements */
    .interactive-element {
      position: absolute;
      background: url('images/circle.png') no-repeat center center;
      background-size: contain;
      width: 50px;
      /* Adjust as needed */
      height: 50px;
      /* Adjust as needed */
      cursor: pointer;
      display: none;
      /* Initially hidden */
    }

    /* Show interactive elements on hover */
    #comic-container:hover .interactive-element {
      display: block;
    }

    #phone {
      top: 50%;
      left: 20%;
      width: 80px;
      height: 50px;
      border: 2px solid red;
    }


    #coffee_cup {
      top: 60%;
      left: 60%;
      width: 50px;
      height: 50px;
      border: 2px solid blue;
    }

    #Ivan_Face {
      top: 50%;
      left: 30%;
      width: 60px;
      height: 60px;
      border: 2px solid green;
    }

    #Uditi_Face {
      top: 50%;
      left: 50%;
      width: 60px;
      height: 60px;
      border: 2px solid purple;
    }

    #Haroon_Face {
      top: 50%;
      left: 70%;
      width: 60px;
      height: 60px;
      border: 2px solid orange;
    }

    #Calendar {
      top: 70%;
      left: 20%;
      width: 50px;
      height: 50px;
      border: 2px solid red;
    }

    #Uditi_Laptop {
      top: 70%;
      left: 40%;
      width: 50px;
      height: 50px;
      border: 2px solid cyan;
    }

    #Vial {
      top: 40%;
      left: 60%;
      width: 50px;
      height: 50px;
      border: 2px solid yellow;
    }

    #Haroon_Papers {
      top: 50%;
      left: 75%;
      width: 50px;
      height: 50px;
      border: 2px solid brown;
    }

    #Ivan_Phone {
      top: 60%;
      left: 20%;
      width: 50px;
      height: 50px;
      border: 2px solid gray;
    }

    #Ivan_Papers {
      top: 60%;
      left: 40%;
      width: 50px;
      height: 50px;
      border: 2px solid pink;
    }


    #subtitle {
      position: absolute;
      bottom: 50px;
      left: 0;
      right: 0;
      text-align: center;
      background-color: rgba(0, 0, 0, 0.7);
      color: #fff;
      font-size: 1rem;
      padding: 5px;
      display: none;
    }


    #nav-buttons {
      margin-top: 20px;
    }


    button {
      padding: 10px 20px;
      font-size: 1rem;
      margin: 5px;
      cursor: pointer;
    }
  </style>
</head>

<body>


  <!-- Menu Bar -->
  <nav>
    <a href="#comic">Comic</a>
    <a href="#about">About</a>
    <a href="#contact">Contact</a>
  </nav>


  <!-- Comic Section -->
  <section id="comic">
    <div id="comic-container">
      <!-- Comic Image -->
      <img id="comic-image" src="images/scene1.jpg" alt="Comic Scene">


      <!-- Interactive elements -->
      <div id="phone" class="interactive-element"></div>
      <div id="coffee_cup" class="interactive-element"></div>
      <div id="Ivan_Face" class="interactive-element"></div>
      <div id="Uditi_Face" class="interactive-element"></div>
      <div id="Haroon_Face" class="interactive-element"></div>
      <div id="Calendar" class="interactive-element"></div>
      <div id="Uditi_Laptop" class="interactive-element"></div>
      <div id="Vial" class="interactive-element"></div>
      <div id="Haroon_Papers" class="interactive-element"></div>
      <div id="Ivan_Phone" class="interactive-element"></div>
      <div id="Ivan_Papers" class="interactive-element"></div>



      <!-- Subtitle that pops up on interaction -->
      <div id="subtitle"></div>


      <!-- Dialogue box -->
      <div id="dialogue-box">Maryam’s body is found in a hallway.</div>
    </div>


    <!-- Navigation buttons -->
    <div id="nav-buttons">
      <button id="prev-btn">Previous</button>
      <button id="next-btn">Next</button>
    </div>
  </section>


  <!-- About Section -->
  <section id="about">
    <h2>About This Comic</h2>
    <p>This interactive comic explores the mystery of Maryam's disappearance. It's designed to engage readers through
      clickable elements that uncover different parts of the story.</p>
    <p>Our goal is to merge traditional storytelling with interactive media to create an immersive experience for
      readers of all ages. Whether you're a fan of comics, mysteries, or both, we hope you enjoy this journey!</p>
  </section>


  <!-- Contact Section -->
  <section id="contact">
    <h2>Contact Us</h2>
    <p>If you have any questions, feedback, or just want to say hi, feel free to reach out to us!</p>
    <p>Email: info@interactivecomic.com</p>
    <p>Phone: +1-234-567-890</p>
    <p>Follow us on social media for updates and more interactive stories!</p>
  </section>


  <script>
    // Scene data (from the JavaScript scene manager system)
    let scenes = {
      "scene_1": {
        scene_id: 1,
        image: "images/Panel_1_1.jpg",
        dialogue: "Where am I, and why am I dead?!",
        next_scenes: [2],
        interactive_elements: [{ element: "phone", triggers: 2, subtitle: "" },
        { element: "coffee_cup", triggers: null, subtitle: "The coffee cup is still warm." }
        ]
      },
      "scene_2": {
        scene_id: 2,
        image: "images/Panel_2_1.jpg",
        dialogue: "I remember I was working with my group. But something seemed off.",
        next_scenes: [201],
        interactive_elements: []
      },
      "scene_201": {
        scene_id: 201,
        image: "images/Panel_2_1.jpg",
        dialogue: "Why was everyone acting so off that day? Were they really annoyed at me, or was something deeper going on...?",
        next_scenes: [3],
        interactive_elements: [
          { element: "Ivan_Face", triggers: null, subtitle: "Ivan was really stressed out over the assignment." },
          { element: "Uditi_Face", triggers: null, subtitle: "Uditi was distracted by her phone." },
          { element: "Haroon_Face", triggers: null, subtitle: "Haroon was looking at me weird." }
        ]
      }, "scene_3": {
        scene_id: 3,
        image: "images/Panel_3_1.jpg",
        dialogue: "Uditi’s been acting strange. Why didn’t I notice this sooner? What was she hiding?",
        next_scenes: [4],
        interactive_elements: [
          { element: "Calendar", triggers: 301, subtitle: "", increments_clue_counter: true },
          { element: "Uditi_Laptop", triggers: 302, subtitle: "", increments_clue_counter: true },
        ]
      }, "scene_301": {
        scene_id: 301,
        image: "images/Panel_3_2.jpg",
        dialogue: "That date… what was so important about today, Uditi?",
        next_scenes: [3],
        interactive_elements: []
      }, "scene_302": {
        scene_id: 302,
        image: "images/Panel_3_3.jpg",
        dialogue: "What do they need to talk about?",
        next_scenes: [3],
        interactive_elements: []
      },
      "scene_4": {
        scene_id: 4,
        image: "images/Panel_4_1.jpg",
        dialogue: "What are you hiding, Haroon?",
        next_scenes: [401],
        interactive_elements: []
      }, "scene_401": {
        scene_id: 401,
        image: "images/Panel_4_2.jpg",
        dialogue: "That vial… is that part of your experiment?",
        next_scenes: [5],
        interactive_elements: [
          { element: "Vial", triggers: 402, subtitle: "", increments_clue_counter: true },
          { element: "Haroon_Papers", triggers: 403, subtitle: "", increments_clue_counter: true }]
      }, "scene_402": {
        scene_id: 402,
        image: "images/Panel_4_3.jpg",
        dialogue: "",
        next_scenes: [401],
        interactive_elements: []
      }, "scene_403": {
        scene_id: 403,
        image: "images/Panel_4_4.jpg",
        dialogue: "",
        next_scenes: [401],
        interactive_elements: []
      }, "scene_5": {
        scene_id: 5,
        image: "images/panel_5_1.jpg",
        dialogue: "Ivan, I know you were mad about the project. But were you really angry enough to kill me over it?",
        next_scenes: [501],
        interactive_elements: []
      },
      "scene_501": {
        scene_id: 501,
        image: "images/panel_5_2.jpg",
        dialogue: "A message... Is this about me?",
        next_scenes: [6],
        interactive_elements: [
          { element: "Ivan_Phone", triggers: 502, subtitle: "", increments_clue_counter: true },
          { element: "Ivan_Papers", triggers: null, subtitle: "More strange papers...", increments_clue_counter: true }
        ]
      },
      "scene_502": {
        scene_id: 502,
        image: "images/panel_5_2.jpg",
        dialogue: "What’s this? Who’s he texting?",
        next_scenes: [501],
        interactive_elements: []
      },
      "scene_6": {
        scene_id: 6,
        image: "images/panel_6_1.jpg",
        dialogue: "Good ending",
        next_scenes: [null],
        interactive_elements: []
      },
      "scene_6_1": {
        scene_id: 601,
        image: "images/panel_6_2.jpg",
        dialogue: "Bad ending",
        next_scenes: [null],
        interactive_elements: []
      }
    };


    let currentScene = scenes["scene_1"];


    // Clue counter initialization
    let clue_counter = 0;

    function displayScene(scene) {
      document.getElementById("comic-image").src = scene.image;
      document.getElementById("dialogue-box").innerText = scene.dialogue;
      document.getElementById("subtitle").style.display = "none";

      // Hide all interactive elements by default
      document.querySelectorAll(".interactive-element").forEach(el => {
        el.style.display = "none";
        el.onclick = null;  // Remove previous click event
      });

      // Show interactive elements for the current scene
      scene.interactive_elements.forEach(interactive => {
        let el = document.getElementById(interactive.element);
        if (el) {
          el.style.display = "block";
          el.onclick = function () {
            handleInteraction(interactive, el);  // Pass the element to handleInteraction
          };
        }
      });
    }

    function handleInteraction(interactive, element) {
      if (interactive.triggers) {
        currentScene = scenes["scene_" + interactive.triggers];
        displayScene(currentScene);
      } else if (interactive.subtitle) {
        let subtitleBox = document.getElementById("subtitle");
        subtitleBox.innerText = interactive.subtitle;
        subtitleBox.style.display = "block";
      }

      // Increment the clue counter and hide the clicked element
      // Check if this interaction should increase the clue counter
      if (interactive.increments_clue_counter) {
        clue_counter++;
        console.log("Clue Counter: " + clue_counter);  // Log the clue count
      }
      element.style.display = "none";
    }

    document.getElementById("next-btn").addEventListener("click", function () {
      if (!currentScene.next_scenes || currentScene.next_scenes.length === 0) {
        console.error("No next scenes available.");
        return;
      }

      let nextSceneId = currentScene.next_scenes[0];

      // Special check before going to the final scene
      if (currentScene.scene_id === 501) {
        // Check if clue_counter is greater than 5
        if (clue_counter > 5) {
          currentScene = scenes["scene_6"];  // Good ending
        } else {
          currentScene = scenes["scene_601"];  // Bad ending
        }
      } else {
        currentScene = scenes["scene_" + nextSceneId];

        // Check if the scene exists
        if (!currentScene) {
          console.error("Next scene is undefined or null.");
          return;
        }
      }

      displayScene(currentScene);
    });

    document.getElementById("prev-btn").addEventListener("click", function () {
      alert('Back navigation not implemented yet!');
    });

    displayScene(currentScene);
  </script>


</body>

</html>
