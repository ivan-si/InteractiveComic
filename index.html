<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Interactive Comic</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f0f0f0;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      flex-direction: column;
    }

    #comic-container {
      width: 80%;
      max-width: 1000px;
      position: relative;
      border: 2px solid #000;
      background-color: #fff;
    }

    #comic-image {
      width: 100%;
      height: auto;
    }

    #dialogue-box {
      padding: 10px;
      background-color: #fff;
      border-top: 2px solid #000;
      font-size: 1.2rem;
    }

    /* Interactive elements as buttons overlaid on the image */
    .interactive-element {
      position: absolute;
      background-color: rgba(255, 255, 255, 0.5);
      border: 2px solid #000;
      cursor: pointer;
    }

    #phone {
      top: 50%; /* Adjust to place it within view */
      left: 20%;
      width: 80px;
      height: 50px;
      border: 2px solid red; /* Add border for visual debugging */
    }

    /* Coffee cup interactive element */
    #coffee_cup {
      top: 60%; /* Adjust this value */
      left: 60%; /* Adjust this value */
      width: 50px;
      height: 50px;
      border: 2px solid blue; /* Add border for visual debugging */
    }

    /* Subtitle for non-navigating interactions */
    #subtitle {
      position: absolute;
      bottom: 50px;
      left: 0;
      right: 0;
      text-align: center;
      background-color: rgba(0, 0, 0, 0.7);
      color: #fff;
      font-size: 1rem;
      padding: 5px;
      display: none; /* Hidden by default */
    }

    /* Buttons for next scene */
    #nav-buttons {
      margin-top: 20px;
    }

    button {
      padding: 10px 20px;
      font-size: 1rem;
      margin: 5px;
      cursor: pointer;
    }

  </style>
</head>
<body>

  <div id="comic-container">
    <!-- Comic Image -->
    <img id="comic-image" src="images/scene1.jpg" alt="Comic Scene">

    <!-- Interactive elements -->
    <div id="phone" class="interactive-element"></div>
    <div id="coffee_cup" class="interactive-element"></div>

    <!-- Subtitle that pops up on interaction -->
    <div id="subtitle"></div>

    <!-- Dialogue box -->
    <div id="dialogue-box">Maryam’s body is found in a hallway.</div>
  </div>

  <!-- Navigation buttons -->
  <div id="nav-buttons">
    <button id="prev-btn">Previous</button>
    <button id="next-btn">Next</button>
  </div>

  <script>
    // Scene data (from the JavaScript scene manager system)
    let scenes = {
      "scene_1": {
        scene_id: 1,
        image: "images/scene1.jpg",
        dialogue: "Maryam’s body is found in a hallway.",
        next_scenes: [2],
        interactive_elements: [
          { element: "phone", triggers: 101, subtitle: "Flashback: The phone shows a message." },
          { element: "coffee_cup", triggers: null, subtitle: "The coffee cup is still warm." } // No scene change, just subtitle
        ]
      },
      "scene_101": {
        scene_id: 101,
        image: "images/flashback_phone.jpg",
        dialogue: "Flashback: Maryam's phone reveals her last text.",
        next_scenes: [2],
        interactive_elements: []
      },
      "scene_2": {
        scene_id: 2,
        image: "images/scene2.jpg",
        dialogue: "Maryam notices some clues.",
        next_scenes: [3],
        interactive_elements: []
      }
    };

    // Current scene
    let currentScene = scenes["scene_1"];

    // Display scene content
    function displayScene(scene) {
      // Update the image, dialogue, and hide subtitle
      document.getElementById("comic-image").src = scene.image;
      document.getElementById("dialogue-box").innerText = scene.dialogue;
      document.getElementById("subtitle").style.display = "none"; // Hide subtitle when switching scenes

      // Hide interactive elements if no interaction for this scene
      document.querySelectorAll(".interactive-element").forEach(el => el.style.display = "none");

      // Display interactive elements
      scene.interactive_elements.forEach(interactive => {
        let el = document.getElementById(interactive.element);
        if (el) {
          el.style.display = "block"; // Show interactive element
          el.onclick = function () {
            handleInteraction(interactive);
          };
        }
      });
    }

    // Handle interaction
    function handleInteraction(interactive) {
      if (interactive.triggers) {
        // Scene change if a trigger exists
        currentScene = scenes["scene_" + interactive.triggers];
        displayScene(currentScene);
      } else if (interactive.subtitle) {
        // Show subtitle if no new scene
        let subtitleBox = document.getElementById("subtitle");
        subtitleBox.innerText = interactive.subtitle;
        subtitleBox.style.display = "block";
      }
    }

    // Next button handler
    document.getElementById("next-btn").addEventListener("click", function () {
      let nextSceneId = currentScene.next_scenes[0];
      currentScene = scenes["scene_" + nextSceneId];
      displayScene(currentScene);
    });

    // Previous button (optional for going back)
    document.getElementById("prev-btn").addEventListener("click", function () {
      // Implement a history stack if you want back navigation
      alert('Back navigation not implemented yet!');
    });

    // Display initial scene
    displayScene(currentScene);
  </script>

</body>
</html>
